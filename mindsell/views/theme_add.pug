extend layout
block content
	include ./includes/home
	script(src='../js/theme_add.js')
	script(src='../js/filter.js')
	script(src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/1.5.0/fabric.min.js")
	script(src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js")

	.container.user-setting
		.row.profile-setting
			.panel.panel-default
				.panel-heading
					h3.panel-title Theme Cover Photo
				ul.list-group
					.list-group-item.theme-image
						.container.col-md-12
							canvas.theme-image#theme-image(style='max-width:500px; display: none')
							#edit-image(style='text-align: center;')
							br
							input.inputfile.inputfile-4#inputfile(type='file' name='uploads[]' multiple='multiple' style="display: none;")
							label(for='inputfile' style='padding-top: 10px; display: block; margin-left: auto; margin-right: auto; width: 140px')
								figure
									svg(xmlns="http://www.w3.org/2000/svg" width="20" height="17" viewBox="0 0 20 17")
										path(d='M10 0l-5.2 4.9h3.3v5.1h3.8v-5.1h3.3l-5.2-4.9zm9.3 11.5l-3.2-2.1h-2l3.4 2.6h-3.5c-.1 0-.2.1-.2.1l-.8 2.3h-6l-.8-2.2c-.1-.1-.1-.2-.2-.2h-3.6l3.4-2.6h-2l-3.2 2.1c-.4.3-.7 1-.6 1.5l.6 3.1c.1.5.7.9 1.2.9h16.3c.6 0 1.1-.4 1.3-.9l.6-3.1c.1-.5-.2-1.2-.7-1.5z')
								span Choose a photo
									
			.col-md-6
				.panel.panel-default
					.panel-heading
						h3.panel-title Middle Photo
					ul.list-group
						.list-group-item.theme-image
							.container.col-md-12
								canvas.theme-image#theme-image2(style='max-width:500px; display: none')
								#edit-image2(style='text-align: center;')
								br
								input.inputfile.inputfile-4#inputfile2(type='file' name='uploads[]' multiple='multiple' style="display: none;")
								label(for='inputfile2' style='padding-top: 10px; display: block; margin-left: auto; margin-right: auto; width: 140px')
									figure
										svg(xmlns="http://www.w3.org/2000/svg" width="20" height="17" viewBox="0 0 20 17")
											path(d='M10 0l-5.2 4.9h3.3v5.1h3.8v-5.1h3.3l-5.2-4.9zm9.3 11.5l-3.2-2.1h-2l3.4 2.6h-3.5c-.1 0-.2.1-.2.1l-.8 2.3h-6l-.8-2.2c-.1-.1-.1-.2-.2-.2h-3.6l3.4-2.6h-2l-3.2 2.1c-.4.3-.7 1-.6 1.5l.6 3.1c.1.5.7.9 1.2.9h16.3c.6 0 1.1-.4 1.3-.9l.6-3.1c.1-.5-.2-1.2-.7-1.5z')
									span Choose a photo
				.panel.panel-default
					.panel-heading
						h3.panel-title Bottom Photo
					ul.list-group
						.list-group-item.theme-image
							.container.col-md-12
								canvas.theme-image#theme-image3(style='max-width:500px; display: none')
								#edit-image3(style='text-align: center;')
								br
								input.inputfile.inputfile-4#inputfile3(type='file' name='uploads[]' multiple='multiple' style="display: none;")
								label(for='inputfile3' style='padding-top: 10px; display: block; margin-left: auto; margin-right: auto; width: 140px')
									figure
										svg(xmlns="http://www.w3.org/2000/svg" width="20" height="17" viewBox="0 0 20 17")
											path(d='M10 0l-5.2 4.9h3.3v5.1h3.8v-5.1h3.3l-5.2-4.9zm9.3 11.5l-3.2-2.1h-2l3.4 2.6h-3.5c-.1 0-.2.1-.2.1l-.8 2.3h-6l-.8-2.2c-.1-.1-.1-.2-.2-.2h-3.6l3.4-2.6h-2l-3.2 2.1c-.4.3-.7 1-.6 1.5l.6 3.1c.1.5.7.9 1.2.9h16.3c.6 0 1.1-.4 1.3-.9l.6-3.1c.1-.5-.2-1.2-.7-1.5z')
									span Choose a photo
			.public-profile.col-md-6
				.panel.panel-default
					.panel-heading
						h3.panel-title Clear course
					ul.list-group
						.list-group-item.setting-item
							.container.col-md-12
								.fluid-row.ss-item
									.form-group
										label.control-label(for='category') Category
										select.form-control#category(name='category', type='text', placeholder='Category')
											option(value='Other') Select a category
											option(value=1) Act					
											option(value=2) Astronomy
											option(value=3) Board game			
											option(value=4) Calligraphy
											option(value=5) Computing			
											option(value=12) Cosmetology											
											option(value=6) Cooking
											option(value=7) Craft
											option(value=8) Design
											option(value=9) Drawing
											option(value=10) Dressing
											option(value=11) Hiking
											option(value=13) Mobile Game
											option(value=14) Photography
											option(value=16) Playing
											option(value=17) Reading
											option(value=18) Shopping
											option(value=19) Weather
											option(value=20) Other
											optiony(value=21) Theme				
									p.text-center
										input.btn.btn-primary#change-category-submit(name='submit' type='submit' value='Clear')
			.public-profile.col-md-6
				.panel.panel-default
					.panel-heading
						h3.panel-title New Theme
					ul.list-group
						.list-group-item.setting-item
							.container.col-md-12
								.fluid-row.ss-item
									.form-group
										input.form-control#userId(name='userId', type='hidden')
									.form-group
										label.control-label(for='title') Theme Title
										input.form-control#title(name='title', type='text', placeholder='Theme Title')
									.form-group
										label.control-label(for='introduction') Introduction
										textarea.form-control#introduction(name='introduction', type='text', placeholder='Introduction')
									.form-group
										label.control-label(for='history') History
										textarea.form-control#history(name='history', type='text', placeholder='History')
									.form-group
										label.control-label(for='background') Background
										textarea.form-control#background(name='background', type='text', placeholder='Background')
									.form-group
										label.control-label(for='content') Content
										textarea.form-control#content(name='content', type='text', placeholder='Content')
									//- .form-group
									//- 	label.control-label(for='hashtag') Hashtag
									//- 	input.form-control#hashtag(name='hashtag', placeholder='E.g #leather')
									p.text-center
										input.btn.btn-primary#theme-submit(name='submit' type='submit' value='Create')
		.modal.fade#myModal(role='dialog')
			.modal-dialog
				.modal-content
					.modal-header
						button(class="close" data-dismiss="modal") &times;
						h4(class="modal-title") Notification
					.modal-body
						p Clear previous theme courses successfully.
					.modal-footer
						a(type="button" class="btn btn-success" data-dismiss="modal") Close											
		.modal.fade#editor(role='dialog')
			.modal-dialog(style="width:80%")
				.modal-content
					.modal-header
						button(class="close" data-dismiss="modal") &times;
						h4(class="modal-title") Image Editor
					.modal-body
						canvas#editing-img(style='max-width:500px; height=auto; float: left; margin: 0px 20px 0px 0px ')
						#modal-body
					.modal-footer
						a#save-img(href="/login" type="button" class="btn btn-primary" data-dismiss="modal") Save
						a#loadOriginal(type="button" class="btn btn-warning") Reset
						a#cancel(type="button" class="btn btn-default" data-dismiss="modal") Discard
	script.
		var canvas = document.getElementById("theme-image");
		var canvas2 = document.getElementById("editing-img"); //copy canvas to modal

		$(document).ready(()=>{
			var user = !{JSON.stringify(user)};
			//- showImage();
			//- showImage("theme-image2");
			imageButton();
			//- AddNewCourse(user);
			AddNewTheme();
			createEditor();

			$('#change-category-submit').on('click', function() {

				var courseCategory = $('#category').val();

				var data = {
					category: courseCategory,
				}
				$.ajax({
					url: '/course/updateCategory',
					type: 'POST',
					data: data,

					success: function(data){
						console.log('Update successful!\n' + data);
						$('#myModal').modal();
					},
					error: ( jqXHR, textStatus, errorThrown ) => {
						console.error(textStatus, errorThrown);
					} 
				});

			});
		});